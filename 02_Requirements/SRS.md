# 软件需求规格说明书 (SRS)
## 1. 功能需求
### 1.1 实时态势模块（Live Dashboard）
- 可视化：Canvas 绘制 ±60°、半径 6 米的扇形监控区域；
- 多目标追踪：支持最多 3 个目标（Target 1-3）实时渲染，不同颜色区分；
- 目标详情：点击目标点显示 X/Y 坐标（mm）、速度、距离；
- 状态指示：显示当前设备上报频率（1Hz 待机/10Hz 加速）。

### 1.2 守卫模式模块（Guardian Mode）
- 预警区配置：支持用户在扇形图上拖拽划定最多 3 个矩形预警区；
- 警戒时间窗：支持设置每日警戒时段（如 22:00-06:00）；
- 入侵告警：警戒时段内目标进入预警区，触发红色闪烁报警+日志记录；
- 区域过滤：ESP32 将预警区坐标转换为 0x00C2 指令，雷达硬件层过滤非关注区信号。

### 1.3 历史回溯模块（Analytics）
- 轨迹重放：支持选择时间段（start_time/end_time），以尾迹线形式回放目标移动路径，支持 1x/2x/4x 速度；
- 热力图统计：将 24 小时内的坐标数据聚合为网格密度图，直观展示高频活动区域；
- 数据导出：支持导出指定时间段的轨迹点数据（JSON 格式）。

### 1.4 设备配置模块（Control Panel）
- 模式切换：一键下发单目标/多目标追踪模式（指令 0x0080/0x0090）；
- 蓝牙控制：开启/关闭雷达蓝牙功能（需重启生效）；
- 设备诊断：显示 ESP32 固件版本、MAC 地址、最后心跳时间、在线状态；
- 远程指令：支持下发重启设备、修改上报频率等指令。

## 2. 非功能需求
### 2.1 性能需求
- 实时性：用户活跃时上报频率 10Hz（100ms/次），前端渲染无掉帧；
- 响应时间：指令下发后，ESP32 下次同步时执行，响应延迟≤1s；
- 数据聚合：热力图接口返回时间≤300ms（基于 10 万条历史数据）；
- 并发支持：单设备支持最多 5 个同时在线观察者（WebSocket 连接）。

### 2.2 可靠性需求
- 设备在线率：正常网络环境下，ESP32 心跳成功率≥99%；
- 数据存储：历史轨迹数据保留 30 天，报警日志永久保留；
- 容错性：网络中断后，ESP32 缓存最近 10 条数据，网络恢复后自动补传。

### 2.3 兼容性需求
- 浏览器支持：Chrome ≥ 90、Firefox ≥ 88、Edge ≥ 90；
- 设备兼容：支持 HLK-LD2450 毫米波雷达模块，ESP32 系列网关；
- 响应式设计：支持 PC 端（≥1280px）、平板端（768-1280px）显示。

## 3. 约束条件
- 硬件约束：雷达最大量程 6 米，目标检测数量≤3 个；
- 网络约束：ESP32 仅支持内网访问，需通过 HTTP Sync 捎带接收指令；
- 协议约束：雷达通信协议为 UART（波特率 256000），支持 0x00C2/0x0080/0x0090 指令；
- 环境约束：工作温度 -10℃~60℃，适用于室内场景（无雨水、强电磁干扰）。
